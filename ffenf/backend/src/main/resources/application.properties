spring.application.name=backend

# --- Database (configure via environment variables) ---
spring.datasource.url=${DB_URL:jdbc:h2:mem:devdb;MODE=PostgreSQL;DB_CLOSE_DELAY=-1;DATABASE_TO_UPPER=false}
spring.datasource.username=${DB_USERNAME:sa}
spring.datasource.password=${DB_PASSWORD:}
spring.datasource.hikari.maximum-pool-size=${DB_POOL_MAX:10}

# JPA/Hibernate
spring.jpa.hibernate.ddl-auto=none
spring.jpa.open-in-view=false
spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true
spring.jpa.show-sql=${JPA_SHOW_SQL:false}

# Flyway
spring.flyway.enabled=true
spring.flyway.locations=classpath:db/migration

# Server
server.port=${PORT:8080}

# File storage configuration - Railway compatible paths
app.storage.path=${STORAGE_PATH:/tmp/uploads}

# Enhanced logging for debugging uploads
logging.level.com.ffenf.app.materials=DEBUG
logging.level.com.ffenf.app.storage=DEBUG
logging.level.org.springframework.web.multipart=DEBUG

# JWT Configuration
jwt.secret=your_super_secret_jwt_key_that_is_at_least_256_bits_long

# File Upload Configuration
spring.servlet.multipart.max-file-size=50MB
spring.servlet.multipart.max-request-size=50MB
spring.servlet.multipart.enabled=true

# OpenAI Configuration
openai.api.key=${OPENAI_API_KEY:}
openai.api.timeout=120000
openai.api.max-retries=3

# Actuator Configuration
management.endpoints.web.exposure.include=health,info
management.endpoint.health.show-details=when-authorized
